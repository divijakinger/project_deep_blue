<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div>
        Upload Files<br />
        <input type="file" id="files" /><br /><br />
        <button>Upload</button>
    </div>
    <script src="https://www.gstatic.com/firebasejs/7.13.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-storage.js"></script>
    <script>

        const firebaseConfig = {
          apiKey: "AIzaSyCgvA9Fpzv6w8z8tg4nighpvy5LzUIyOc0",
          authDomain: "deepblue-9d1e4.firebaseapp.com",
          databaseURL: "https://deepblue-9d1e4-default-rtdb.firebaseio.com",
          projectId: "deepblue-9d1e4",
          storageBucket: "deepblue-9d1e4.appspot.com",
          messagingSenderId: "23752612447",
          appId: "1:23752612447:web:471ca57d6be5162d2a19ea"
        };

        firebase.initializeApp(firebaseConfig);
    </script>
     <script>
        var files = [];
        document.getElementById("files").addEventListener("change", function(e) {
        files = e.target.files;
        });
        document.getElementById("send").addEventListener("click", function() {
      //checks if files are selected
      if (files.length != 0) {

      //Loops through all the selected files
      for (let i = 0; i < files.length; i++) {

        //create a storage reference
        var storage = firebase.storage().ref(files[i].name);

        //upload file
        var upload = storage.put(files[i]);

        //update progress bar
        upload.on(
          "state_changed",
          function progress(snapshot) {
            var percentage =
              (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
            document.getElementById("progress").value = percentage;
          },

          function error() {
            alert("error uploading file");
          },

          function complete() {
            document.getElementById(
              "uploading"
            ).innerHTML += `${files[i].name} upoaded <br />`;
          }
        );
      }
      } else {
      alert("No file chosen");
      }
      });
    </script>
</body>
</html>